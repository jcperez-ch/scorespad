(this.webpackJsonpscorespad=this.webpackJsonpscorespad||[]).push([[0],{204:function(e,t,a){"use strict";var n=a(17),r=a(13),i=a(0),s=a.n(i),o=a(88),c=a(55),l=a(44),m=a(11),d=a(22);function u(){const e=Object(r.a)(["\n  && {\n    margin-left: 0.75rem;\n  }\n"]);return u=function(){return e},e}function h(){const e=Object(r.a)(["\n  align-items: center;\n  display: flex;\n  justify-content: flex-start;\n"]);return h=function(){return e},e}function b(){const e=Object(r.a)(["\n  border-bottom: 1px solid ",";\n"]);return b=function(){return e},e}const g=m.d.h4(b(),d.b.border),v=m.d.div(h()),f=Object(m.d)(l.a).attrs({component:"h4",variant:"overline"})(u());t.a=Object(i.forwardRef)((e,t)=>{let{children:a,onClose:r}=e,i=Object(n.a)(e,["children","onClose"]);return s.a.createElement(g,Object.assign({ref:t},i),s.a.createElement(v,null,s.a.createElement(o.a,{color:"primary",onClick:r},s.a.createElement(c.a,null,"close")),s.a.createElement(f,null,a)))})},207:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(221);t.a=Object(n.forwardRef)((e,t)=>r.a.createElement(i.a,Object.assign({ref:t,direction:"up"},e)))},216:function(e,t,a){"use strict";var n=a(17),r=a(0),i=a.n(r),s=a(192),o=a(165);const c=Object(o.a)({root:{alignItems:"stretch",display:"flex",flex:"1 1 100%",flexDirection:"column",justifyContent:"space-between",margin:"0",padding:"1.5rem"}});t.a=e=>{let{children:t}=e,a=Object(n.a)(e,["children"]);const{root:r}=c();return i.a.createElement(s.a,Object.assign({classes:{root:r},role:"tabpanel",elevation:5},a),t)}},255:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(15),s=a(10),o=a(262),c=a(256),l=a(226),m=a.n(l),d=a(227),u=a.n(d),h=a(204);t.default=()=>{const[e]=Object(i.b)(),t=Object(s.h)(),{pathname:a}=Object(s.g)();return r.a.createElement("div",{style:{flex:"1 1 100%",display:"flex",flexDirection:"column"}},r.a.createElement(h.a,{id:"game-add-dialog-title",onClose:()=>t("..")},e("game_title")),r.a.createElement(o.a,{value:a.replace(/^\/game\/?/,""),onChange:(e,a)=>{t(a||".")},variant:"fullWidth"},r.a.createElement(c.a,{label:e("game_tab_byName"),value:"",icon:r.a.createElement(m.a,null)}),r.a.createElement(c.a,{label:e("game_tab_byScan"),value:"scan",icon:r.a.createElement(u.a,null)})),r.a.createElement(s.a,null))}},257:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(15),s=a(10),o=a(196),c=a(58),l=a(216),m=a(23),d=a(46),u=a(59);t.default=()=>{const[e,t]=Object(n.useState)(""),a=Object(s.h)(),[h]=Object(i.b)(),[,b]=Object(n.useContext)(m.a),{error:g,onSubmit:v}=Object(u.a)({name:e,errorMessage:"errors.requiredGameName",onSubmit:()=>{const t=Date.now().toString(36);b(Object(d.b)(t,e)),a("../games/".concat(t))}});return r.a.createElement(l.a,null,r.a.createElement(c.a,{variant:"outlined",label:h("placeholder.gameName"),onChange:t,onEnter:v,error:g,value:e}),r.a.createElement(o.a,{variant:"extended",color:"primary",size:"large","aria-label":h("button.createGame"),onClick:v},h("button.createGame")))}},263:function(e,t,a){"use strict";a.r(t);var n=a(17),r=a(0),i=a.n(r),s=a(15),o=a(10),c=a(249),l=a(224),m=a(222),d=a(196),u=a(44),h=a(102),b=a(6),g=a(9),v=a(223);var f=()=>{const e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("safari")&&-1===e.indexOf("chrome")};const p={display:"flex"};class C extends r.Component{constructor(e){super(e),this.stream=null,this.streamWidth=0,this.streamHeight=0,this.video=null,this.canvasContext=null,this.stopCamera=()=>{this.stream&&(this.stream.getTracks().map(e=>e.stop()),this.stream=null,this.streamWidth=0,this.streamHeight=0,this.canvasContext=null)},this.startCamera=async()=>{if(this.stopCamera(),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("WebRTC API not supported in this browser");const e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind);let t={facingMode:"user"};if(e.length>1){const a=this.props.rearCamera?1:0,n=this.props.rearCamera?"environment":"user";t=f()?{facingMode:{exact:n}}:{deviceId:e[a].deviceId}}if(this.stream=await navigator.mediaDevices.getUserMedia({audio:!1,video:t}),void 0!==this.video.srcObject?this.video.srcObject=this.stream:void 0!==this.video.mozSrcObject?this.video.mozSrcObject=this.stream:window.URL.createObjectURL?this.video.src=window.URL.createObjectURL(this.stream):window.webkitURL?this.video.src=window.webkitURL.createObjectURL(this.stream):this.video.src=this.stream,this.video.playsInline=!0,this.video.play(),await this.streamLoadedPromise(),this.streamWidth=this.video.videoWidth,this.streamHeight=this.video.videoHeight,!this.canvasContext){const e=document.createElement("canvas");e.width=this.streamWidth,e.height=this.streamHeight,this.canvasContext=e.getContext("2d")}},this.streamLoadedPromise=()=>new Promise((e,t)=>{this.video.addEventListener("loadeddata",e,{once:!0}),this.video.addEventListener("error",t,{once:!0})}),this.captureFrame=()=>(this.canvasContext.drawImage(this.video,0,0,this.streamWidth,this.streamHeight),this.canvasContext.getImageData(0,0,this.streamWidth,this.streamHeight)),this.drawFrame=()=>{window.requestAnimationFrame(()=>{const{onFrame:e}=this.props;if(!this.canvasContext)return;const{data:t}=this.captureFrame();e({data:t,width:this.streamWidth,height:this.streamHeight})})},this.state={}}async componentDidMount(){const{onInit:e}=this.props;try{await this.startCamera();const{strean:t,video:a,canvasContext:n}=this;e({strean:t,video:a,canvasContext:n},this.drawFrame)}catch(t){this.setState({error:"Browser camera init error: ".concat(t)})}}componentWillUnmount(){this.stopCamera()}render(){const{style:e={},fallback:t=null}=this.props,{error:a}=this.state;return a?t:i.a.createElement("video",{style:Object(b.a)(Object(b.a)({},p),e),ref:e=>this.video=e})}}C.defaultProps={rearCamera:!0};var j=C,O=a(39);var E=({className:e,style:t,rearCamera:a=!0,videoStyle:n,shouldDecode:s=!0,fallbackCode:o=null,fallbackMedia:c=null,tryAgainButtonLabel:l="retry",giveUpButtonLabel:m="give up",onInit:d=g.noop,onCode:u=g.noop,onClose:h=g.noop})=>{const f=Object(r.useRef)(null),p=Object(r.useRef)(g.noop),[C,E]=Object(r.useState)(!1),w=Object(r.useCallback)(e=>{const t=e.data;if(t){const{data:e}=t;if(u&&e.length>0)try{u(JSON.parse(e))}catch(a){E(!0)}}s&&p.current()},[u,s]);Object(r.useEffect)(()=>(f.current=new Worker("".concat("/scorespad","/qr-worker.js")),f.current.addEventListener("message",w),()=>{f.current&&(f.current.terminate(),f.current=null)}),[w]);const y=Object(b.a)({display:"grid",justifyContent:"center",maxWidth:"100%",margin:"0 auto",overflow:"hidden"},t);return i.a.createElement("div",{className:e,style:y},C?i.a.createElement(i.a.Fragment,null,o,i.a.createElement(v.a,{style:{paddingRight:0}},i.a.createElement(O.a,{color:"default",size:"large",icon:"arrow_back",label:m,onClick:h}),i.a.createElement(O.a,{size:"large",icon:"replay",label:l,onClick:()=>E(!1)}))):i.a.createElement(j,{onFrame:e=>f.current.postMessage(e),onInit:(e,t)=>{d&&d(e),p.current=t,s&&p.current()},rearCamera:a,style:n,fallback:c}))},w=a(216),y=a(204),x=a(207),k=a(47),L=a(23),_=a(46);t.default=()=>{const[e]=Object(s.b)(),t=Object(o.h)(),[,a]=Object(r.useContext)(L.a),[b,g]=Object(r.useState)(null),v=Object(r.useCallback)(e=>{g(e)},[]),f=()=>t(".."),p=Object(r.useMemo)(()=>{if(b){return new Date(parseInt(b.id,36)).toDateString()}return""},[b]);return i.a.createElement(w.a,null,i.a.createElement(l.a,{id:"game-scan-dialog",onClose:f,"aria-labelledby":"game-scan-dialog-title",open:!b,fullScreen:!0,TransitionComponent:x.a},i.a.createElement(y.a,{id:"game-share-dialog-title",onClose:f},e("game_scan_title")),i.a.createElement(m.a,null,i.a.createElement(E,{fallbackCode:i.a.createElement(k.a,{icon:"mobile_off",message:e("game_scan_wrong_code")}),fallbackMedia:i.a.createElement(k.a,{icon:"videocam_off",message:e("game_scan_no_camera")}),tryAgainButtonLabel:e("button.tryAgain"),giveUpButtonLabel:e("button.back"),onCode:v,onClose:f}))),b&&i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{title:b.name,subheader:e("messages.createdAt",{date:p})}),b.teams.length>0&&i.a.createElement(u.a,{variant:"overline"},i.a.createElement(h.a,{items:b.teams,keyedBy:"name",attribute:"name"})),i.a.createElement(d.a,{variant:"extended",color:"primary",size:"large","aria-label":e("button.createGame"),onClick:()=>{const{id:e}=b,r=Object(n.a)(b,["id"]);a(Object(_.d)(e,r)),t("../games/".concat(e))}},e("button.confirmAndCreate"))))}}}]);
//# sourceMappingURL=gc.c655bc71.chunk.js.map