(globalThis.webpackChunkscorespad=globalThis.webpackChunkscorespad||[]).push([[611],{913:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(2791),a=n(2262),s=n(184);function i(e,t){return(0,s.jsx)(a.Z,{ref:t,direction:"up",...e})}const o=(0,r.forwardRef)(i)},9624:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(2373),a=n(8302);const s=(0,r.ZP)(a.Z).attrs({variant:"body2",gutterBottom:!0})`
  padding: 1rem 0 0.5rem;
`},4647:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(2791),a=n(7025),s=n(9418),i=n(8302),o=n(2373),c=n(6659),l=n(184);const d=o.ZP.h4`
  border-bottom: 1px solid ${c.lB.border};
`,u=o.ZP.div`
  align-items: center;
  display: flex;
  justify-content: flex-start;
`,m=(0,o.ZP)(i.Z).attrs({component:"h4",variant:"overline"})`
  && {
    margin-left: 0.75rem;
  }
`;function h(e,t){let{children:n,onClose:r,...i}=e;return(0,l.jsx)(d,{ref:t,...i,children:(0,l.jsxs)(u,{children:[(0,l.jsx)(a.Z,{color:"primary",onClick:r,children:(0,l.jsx)(s.Z,{children:"close"})}),(0,l.jsx)(m,{children:n})]})})}const p=(0,r.forwardRef)(h)},6417:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>M});var r=n(2791),a=n(2020),s=n(5987),i=n(1002),o=n(4942),c=n(7399),l=n.n(c),d=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function u(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(l()[n[1]]||"/"===e.charAt(e.length-2))&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("--\x3e");return{type:"comment",comment:-1!==r?e.slice(4,r):""}}for(var a=new RegExp(d),s=null;null!==(s=a.exec(e));)if(s[0].trim())if(s[1]){var i=s[1].trim(),o=[i,""];i.indexOf("=")>-1&&(o=i.split("=")),t.attrs[o[0]]=o[1],a.lastIndex--}else s[2]&&(t.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return t}var m=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,h=/^\s*$/,p=Object.create(null);function v(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(v,"")+"</"+t.name+">";case"comment":return e+"\x3c!--"+t.comment+"--\x3e"}}var f={parse:function(e,t){t||(t={}),t.components||(t.components=p);var n,r=[],a=[],s=-1,i=!1;if(0!==e.indexOf("<")){var o=e.indexOf("<");r.push({type:"text",content:-1===o?e:e.substring(0,o)})}return e.replace(m,(function(o,c){if(i){if(o!=="</"+n.name+">")return;i=!1}var l,d="/"!==o.charAt(1),m=o.startsWith("\x3c!--"),p=c+o.length,v=e.charAt(p);if(m){var f=u(o);return s<0?(r.push(f),r):((l=a[s]).children.push(f),r)}if(d&&(s++,"tag"===(n=u(o)).type&&t.components[n.name]&&(n.type="component",i=!0),n.voidElement||i||!v||"<"===v||n.children.push({type:"text",content:e.slice(p,e.indexOf("<",p))}),0===s&&r.push(n),(l=a[s-1])&&l.children.push(n),a[s]=n),(!d||n.voidElement)&&(s>-1&&(n.voidElement||n.name===o.slice(2,-1))&&(s--,n=-1===s?r:a[s]),!i&&"<"!==v&&v)){l=-1===s?r:a[s].children;var g=e.indexOf("<",p),y=e.slice(p,-1===g?void 0:g);h.test(y)&&(y=" "),(g>-1&&s+l.length>=0||" "!==y)&&l.push({type:"text",content:y})}})),r},stringify:function(e){return e.reduce((function(e,t){return e+v("",t)}),"")}};const g=f;var y=n(8589),b=n(1426),x=["format"],j=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t){if(!e)return!1;var n=e.props?e.props.children:e.children;return t?n.length>0:!!n}function O(e){return e?e.props?e.props.children:e.children:[]}function k(e){return Array.isArray(e)?e:[e]}function E(e,t){if(!e)return"";var n="",a=k(e),o=t.transSupportBasicHtmlNodes&&t.transKeepBasicHtmlNodesFor?t.transKeepBasicHtmlNodesFor:[];return a.forEach((function(e,a){if("string"===typeof e)n+="".concat(e);else if((0,r.isValidElement)(e)){var c=Object.keys(e.props).length,l=o.indexOf(e.type)>-1,d=e.props.children;if(!d&&l&&0===c)n+="<".concat(e.type,"/>");else if(d||l&&0===c)if(e.props.i18nIsDynamicList)n+="<".concat(a,"></").concat(a,">");else if(l&&1===c&&"string"===typeof d)n+="<".concat(e.type,">").concat(d,"</").concat(e.type,">");else{var u=E(d,t);n+="<".concat(a,">").concat(u,"</").concat(a,">")}else n+="<".concat(a,"></").concat(a,">")}else if(null===e)(0,b.ZK)("Trans: the passed in value is invalid - seems you passed in a null child.");else if("object"===(0,i.Z)(e)){var m=e.format,h=(0,s.Z)(e,x),p=Object.keys(h);if(1===p.length){var v=m?"".concat(p[0],", ").concat(m):p[0];n+="{{".concat(v,"}}")}else(0,b.ZK)("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",e)}else(0,b.ZK)("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",e)})),n}function N(e,t,n,a,s,o){if(""===t)return[];var c=a.transKeepBasicHtmlNodesFor||[],l=t&&new RegExp(c.join("|")).test(t);if(!e&&!l)return[t];var d={};!function e(t){k(t).forEach((function(t){"string"!==typeof t&&(C(t)?e(O(t)):"object"!==(0,i.Z)(t)||(0,r.isValidElement)(t)||Object.assign(d,t))}))}(e);var u=g.parse("<0>".concat(t,"</0>")),m=w(w({},d),s);function h(e,t,n){var a=O(e),s=v(a,t.children,n);return function(e){return"[object Array]"===Object.prototype.toString.call(e)&&e.every((function(e){return(0,r.isValidElement)(e)}))}(a)&&0===s.length?a:s}function p(e,t,n,a,s){e.dummy&&(e.children=t),n.push((0,r.cloneElement)(e,w(w({},e.props),{},{key:a}),s?void 0:t))}function v(t,s,d){var u=k(t);return k(s).reduce((function(t,s,f){var g=s.children&&s.children[0]&&s.children[0].content&&n.services.interpolator.interpolate(s.children[0].content,m,n.language);if("tag"===s.type){var y=u[parseInt(s.name,10)];!y&&1===d.length&&d[0][s.name]&&(y=d[0][s.name]),y||(y={});var b=0!==Object.keys(s.attrs).length?function(e,t){var n=w({},t);return n.props=Object.assign(e.props,t.props),n}({props:s.attrs},y):y,x=(0,r.isValidElement)(b),j=x&&C(s,!0)&&!s.voidElement,Z=l&&"object"===(0,i.Z)(b)&&b.dummy&&!x,O="object"===(0,i.Z)(e)&&null!==e&&Object.hasOwnProperty.call(e,s.name);if("string"===typeof b){var k=n.services.interpolator.interpolate(b,m,n.language);t.push(k)}else if(C(b)||j){p(b,h(b,s,d),t,f)}else if(Z){var E=v(u,s.children,d);t.push((0,r.cloneElement)(b,w(w({},b.props),{},{key:f}),E))}else if(Number.isNaN(parseFloat(s.name))){if(O)p(b,h(b,s,d),t,f,s.voidElement);else if(a.transSupportBasicHtmlNodes&&c.indexOf(s.name)>-1)if(s.voidElement)t.push((0,r.createElement)(s.name,{key:"".concat(s.name,"-").concat(f)}));else{var N=v(u,s.children,d);t.push((0,r.createElement)(s.name,{key:"".concat(s.name,"-").concat(f)},N))}else if(s.voidElement)t.push("<".concat(s.name," />"));else{var P=v(u,s.children,d);t.push("<".concat(s.name,">").concat(P,"</").concat(s.name,">"))}}else if("object"!==(0,i.Z)(b)||x)1===s.children.length&&g?t.push((0,r.cloneElement)(b,w(w({},b.props),{},{key:f}),g)):t.push((0,r.cloneElement)(b,w(w({},b.props),{},{key:f})));else{var S=s.children[0]?g:null;S&&t.push(S)}}else if("text"===s.type){var R=a.transWrapTextNodes,L=o?a.unescape(n.services.interpolator.interpolate(s.content,m,n.language)):n.services.interpolator.interpolate(s.content,m,n.language);R?t.push((0,r.createElement)(R,{key:"".concat(s.name,"-").concat(f)},L)):t.push(L)}return t}),[])}return O(v([{dummy:!0,children:e||[]}],u,k(e||[]))[0])}function P(e){var t=e.children,n=e.count,a=e.parent,i=e.i18nKey,o=e.context,c=e.tOptions,l=void 0===c?{}:c,d=e.values,u=e.defaults,m=e.components,h=e.ns,p=e.i18n,v=e.t,f=e.shouldUnescape,g=(0,s.Z)(e,j),x=(0,r.useContext)(y.OO)||{},Z=x.i18n,C=x.defaultNS,O=p||Z||(0,y.nI)();if(!O)return(0,b.O4)("You will need to pass in an i18next instance by using i18nextReactModule"),t;var k=v||O.t.bind(O)||function(e){return e};o&&(l.context=o);var P=w(w({},(0,y.JP)()),O.options&&O.options.react),S=h||k.ns||C||O.options&&O.options.defaultNS;S="string"===typeof S?[S]:S||["translation"];var R=u||E(t,P)||P.transEmptyNodeValue||i,L=P.hashTransKey,F=i||(L?L(R):R),T=d?l.interpolation:{interpolation:w(w({},l.interpolation),{},{prefix:"#$?",suffix:"?$#"})},D=w(w(w(w({},l),{},{count:n},d),T),{},{defaultValue:R,ns:S}),I=N(m||t,F?k(F,D):R,O,P,D,f),U=void 0!==a?a:P.defaultTransParent;return U?(0,r.createElement)(U,g,I):I}var S=n(7689),R=n(1087),L=n(6513),F=n(269),T=n(4026),D=n(4864),I=n(9624),U=n(4647),W=n(2059),A=n(5084),B=n(1973),H=n(184);function M(){const[e,t]=(0,r.useState)(""),n=(0,S.s0)(),[s]=(0,a.$)(),[,i]=(0,r.useContext)(W.Z),{error:o,onSubmit:c}=(0,B.Z)({name:e,errorMessage:"errors.requiredGameName",onSubmit:()=>{const t=Date.now().toString(36);i((0,A.dz)(t,e)),n(`/games/${t}/team?step`)}}),l=()=>n("/");return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(U.Z,{id:"game-add-dialog-title",onClose:l,children:s("game_title")}),(0,H.jsxs)(T.Z,{children:[(0,H.jsx)(I.Z,{children:s("text.addNewGame")}),(0,H.jsx)(D.Z,{variant:"outlined",label:s("placeholder.gameName"),onChange:t,onEnter:c,error:o,value:e}),(0,H.jsx)(I.Z,{children:(0,H.jsx)(P,{components:{a:(0,H.jsx)(R.rU,{to:"./scan"})},i18nKey:"text.addNewGameByScan",values:{here:s("button.here")}})})]}),(0,H.jsxs)(F.Z,{children:[(0,H.jsx)(L.Z,{onClick:l,children:s("button.cancel")}),(0,H.jsx)(L.Z,{variant:"contained",color:"primary",autoFocus:!0,onClick:c,children:s("button.createGame")})]})]})}},4360:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>C});var r=n(2791),a=n(2020),s=n(7689),i=n(6513),o=n(6950),c=n(269),l=n(4026),d=n(8302),u=n(1957),m=n(8176);const h=()=>{const e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("safari")&&-1===e.indexOf("chrome")};var p=n(184);const v={display:"flex"};class f extends r.Component{constructor(e){super(e),this.stream=null,this.streamWidth=0,this.streamHeight=0,this.video=null,this.canvasContext=null,this.stopCamera=()=>{this.stream&&(this.stream.getTracks().map((e=>e.stop())),this.stream=null,this.streamWidth=0,this.streamHeight=0,this.canvasContext=null)},this.startCamera=async()=>{const{rearCamera:e}=this.props;if(this.stopCamera(),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("WebRTC API not supported in this browser");const t=(await navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind));let n={facingMode:"user"};if(t.length>1){const r=e?1:0,a=e?"environment":"user";n=h()?{facingMode:{exact:a}}:{deviceId:t[r].deviceId}}if(this.stream=await navigator.mediaDevices.getUserMedia({audio:!1,video:n}),void 0!==this.video.srcObject?this.video.srcObject=this.stream:void 0!==this.video.mozSrcObject?this.video.mozSrcObject=this.stream:window.URL.createObjectURL?this.video.src=window.URL.createObjectURL(this.stream):window.webkitURL?this.video.src=window.webkitURL.createObjectURL(this.stream):this.video.src=this.stream,this.video.playsInline=!0,this.video.play(),await this.streamLoadedPromise(),this.streamWidth=this.video.videoWidth,this.streamHeight=this.video.videoHeight,!this.canvasContext){const e=document.createElement("canvas");e.width=this.streamWidth,e.height=this.streamHeight,this.canvasContext=e.getContext("2d")}},this.streamLoadedPromise=()=>new Promise(((e,t)=>{this.video.addEventListener("loadeddata",e,{once:!0}),this.video.addEventListener("error",t,{once:!0})})),this.captureFrame=()=>(this.canvasContext.drawImage(this.video,0,0,this.streamWidth,this.streamHeight),this.canvasContext.getImageData(0,0,this.streamWidth,this.streamHeight)),this.drawFrame=()=>{window.requestAnimationFrame((()=>{const{onFrame:e}=this.props;if(!this.canvasContext)return;const{data:t}=this.captureFrame();e({data:t,width:this.streamWidth,height:this.streamHeight})}))},this.state={}}async componentDidMount(){const{onInit:e}=this.props;try{await this.startCamera();const{strean:t,video:n,canvasContext:r}=this;e({strean:t,video:n,canvasContext:r},this.drawFrame)}catch(t){this.setState({error:`Browser camera init error: ${t}`})}}componentWillUnmount(){this.stopCamera()}render(){const{style:e={},fallback:t=null}=this.props,{error:n}=this.state;return n?t:(0,p.jsx)("video",{muted:!0,style:{...v,...e},ref:e=>(this.video=e,e)})}}f.defaultProps={rearCamera:!0};const g=f;var y=n(837);const b=function(e){let{className:t,style:n,rearCamera:a=!0,videoStyle:s,shouldDecode:i=!0,fallbackCode:o=null,fallbackMedia:l=null,tryAgainButtonLabel:d="retry",giveUpButtonLabel:u="give up",onInit:h=m.Z,onCode:v=m.Z,onClose:f=m.Z}=e;const b=(0,r.useRef)(null),x=(0,r.useRef)(m.Z),[j,Z]=(0,r.useState)(!1),w=(0,r.useCallback)((e=>{const t=e.data;if(t){const{data:e}=t;if(v&&e.length>0)try{v(JSON.parse(e))}catch(n){Z(!0)}}i&&x.current()}),[v,i]);(0,r.useEffect)((()=>(b.current=new Worker("/scorespad/qr-worker.js"),b.current.addEventListener("message",w),()=>{b.current&&(b.current.terminate(),b.current=null)})),[w]);const C={display:"grid",justifyContent:"center",maxWidth:"100%",margin:"0 auto",overflow:"hidden",...n};return(0,p.jsx)("div",{className:t,style:C,children:j?(0,p.jsxs)(p.Fragment,{children:[o,(0,p.jsxs)(c.Z,{style:{paddingRight:0},children:[(0,p.jsx)(y.Z,{color:"default",size:"large",icon:"arrow_back",label:u,onClick:f}),(0,p.jsx)(y.Z,{size:"large",icon:"replay",label:d,onClick:()=>Z(!1)})]})]}):(0,p.jsx)(g,{onFrame:e=>b.current.postMessage(e),onInit:(e,t)=>{h&&h(e),x.current=t,i&&x.current()},rearCamera:a,style:s,fallback:l})})};var x=n(4647),j=n(2637),Z=n(2059),w=n(5084);function C(){const[e]=(0,a.$)(),t=(0,s.s0)(),[,n]=(0,r.useContext)(Z.Z),[m,h]=(0,r.useState)(null),v=(0,r.useCallback)((e=>{h(e)}),[]),f=()=>t("/"),g=(0,r.useMemo)((()=>{if(m){return new Date(parseInt(m.id,36)).toDateString()}return""}),[m]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(x.Z,{id:"game-share-dialog-title",onClose:f,children:e("game_scan_title")}),(0,p.jsxs)(l.Z,{children:[(0,p.jsx)(b,{fallbackCode:(0,p.jsx)(j.Z,{icon:"mobile_off",message:e("game_scan_wrong_code")}),fallbackMedia:(0,p.jsx)(j.Z,{icon:"videocam_off",message:e("game_scan_no_camera")}),tryAgainButtonLabel:e("button.tryAgain"),giveUpButtonLabel:e("button.back"),onCode:v,onClose:f}),m&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.Z,{title:m.name,subheader:e("messages.createdAt",{date:g})}),m.teams.length>0&&(0,p.jsx)(d.Z,{variant:"overline",children:(0,p.jsx)(u.Z,{items:m.teams,keyedBy:"name",attribute:"name"})})]})]}),(0,p.jsxs)(c.Z,{children:[(0,p.jsx)(i.Z,{onClick:()=>t("/game"),children:e("button.back")}),m&&(0,p.jsx)(i.Z,{variant:"contained",color:"primary",autoFocus:!0,onClick:()=>{const{id:e,...r}=m;n((0,w.wn)(e,r)),t(`/games/${e}`)},children:e("button.confirm")})]})]})}},1542:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});n(2791);var r=n(7689),a=n(3594),s=n(913),i=n(184);function o(){const e=(0,r.s0)();return(0,i.jsx)(a.Z,{fullScreen:!0,id:"team-add-dialog",onClose:()=>e("/"),"aria-labelledby":"game-add-dialog-title",open:!0,TransitionComponent:s.Z,children:(0,i.jsx)(r.j3,{})})}},6950:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(7462),a=n(5987),s=n(2791),i=(n(2007),n(8182)),o=n(8317),c=n(8302),l=s.forwardRef((function(e,t){var n=e.action,o=e.avatar,l=e.classes,d=e.className,u=e.component,m=void 0===u?"div":u,h=e.disableTypography,p=void 0!==h&&h,v=e.subheader,f=e.subheaderTypographyProps,g=e.title,y=e.titleTypographyProps,b=(0,a.Z)(e,["action","avatar","classes","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"]),x=g;null==x||x.type===c.Z||p||(x=s.createElement(c.Z,(0,r.Z)({variant:o?"body2":"h5",className:l.title,component:"span",display:"block"},y),x));var j=v;return null==j||j.type===c.Z||p||(j=s.createElement(c.Z,(0,r.Z)({variant:o?"body2":"body1",className:l.subheader,color:"textSecondary",component:"span",display:"block"},f),j)),s.createElement(m,(0,r.Z)({className:(0,i.Z)(l.root,d),ref:t},b),o&&s.createElement("div",{className:l.avatar},o),s.createElement("div",{className:l.content},x,j),n&&s.createElement("div",{className:l.action},n))}));const d=(0,o.Z)({root:{display:"flex",alignItems:"center",padding:16},avatar:{flex:"0 0 auto",marginRight:16},action:{flex:"0 0 auto",alignSelf:"flex-start",marginTop:-8,marginRight:-8},content:{flex:"1 1 auto"},title:{},subheader:{}},{name:"MuiCardHeader"})(l)},7399:e=>{e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}}}]);
//# sourceMappingURL=gc.af1fe8ac.chunk.js.map